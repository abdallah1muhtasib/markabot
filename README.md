# Marka Bot

Marka Bot هو بوت ديسكورد متقدم مكتوب بلغة Java بإستخدام مكتبة JDA. الهدف من المشروع هو بناء بديل مفتوح المصدر للبوتات التجارية مثل ProBot مع التركيز على التنظيم (Moderation) والصوت والإقتصاد والنظام التفاعلي الكامل. البوت مبني بطريقة معيارية قابلة للتوسع بحيث يمكن إضافة ميزات جديدة بسهولة ودون التضحية بالأداء.

## المميزات (قيد التنفيذ)

يهدف Marka Bot إلى تحقيق التكافؤ مع ProBot عبر الميزات التالية:

- **مجموعة التنظيم**: أوامر للحظر، الطرد، كتم الأصوات، إدارة الصلاحيات، وسجل للتحذيرات.
- **التنظيم التلقائي ومكافحة الـRaid**: كشف روابط وكلمات ممنوعة، وإجراءات تلقائية للحماية.
- **السجلات (Logging)**: تسجيل الأحداث المختلفة مثل إنشاء/حذف الرسائل، تحديث الأعضاء، القنوات والأدوار.
- **الترحيب والوداع**: رسائل وصور ترحيبية عند انضمام الأعضاء، ورسائل عند المغادرة.
- **الأدوار**: أدوار تلقائية عند الانضمام وأدوار تفاعلية عبر أزرار/قوائم.
- **نظام المستويات (XP/Rank)**: مكافأة النشاط داخل الخادم بنقاط مستوى وأدوار.
- **الإقتصاد والسمعة**: نظام عملات وتحويلات وتخصيص ملفات المستخدمين.
- **الموسيقى**: تشغيل وتحكم بالموسيقى عبر LavaPlayer مع دعم كامل لقوائم التشغيل.
- **الإشعارات الاجتماعية**: تنبيهات YouTube وTwitch إلى قنوات محددة.
- **قنوات صوتية مؤقتة**: إنشاء قنوات خاصة مؤقتة عند الحاجة.
- **التذاكر**: نظام تذاكر للدعم الفني وإدارة البلاغات.
- **أدوات مساعدة**: أوامر لعرض معلومات الخادم والمستخدم، الـPing، إنشاء الرسائل المضمنة.

> **ملاحظة:** هذا المستودع يوفر الهيكل الأساسي للبوت. معظم الميزات مازالت قيد التطوير وسيتم إضافتها تدريجياً عبر طلبات دمج متتابعة.

## البدء السريع

1. **دعوة البوت إلى خادمك:** استخدم رابط الدعوة مع الصلاحيات المناسبة (انظر ملف `CONFIG.md` للحصول على تفاصيل حول `INVITE_PERMS`).
2. **إعداد القنوات والأدوار:** بعد انضمام البوت، استخدم أوامر `/config` لتحديد قناة الترحيب، قناة السجلات ودور الـDJ.
3. **إستمتع بالميزات:** جرّب أمر `/about` للتأكد من تشغيل البوت. سيتم توفير أوامر إضافية تدريجياً.

## تطوير وتشغيل محلي

يشترط وجود Java 17 أو أعلى. بعد استنساخ المستودع، يمكن بناء المشروع عبر Gradle:

```bash
./gradlew build
```

لتشغيل البوت محلياً:

1. أنشئ ملف `.env` وضع فيه القيم التالية:

```env
BOT_TOKEN=توكن البوت من بوابة ديسكورد للمطورين
BOT_VERSION=0.1.0-SNAPSHOT
DB_URL=jdbc:postgresql://localhost:5432/markabot
DB_USERNAME=اسم_المستخدم
DB_PASSWORD=كلمة_المرور
```

2. صدّر المتغيرات البيئية ثم شغّل البوت:

```bash
export $(grep -v '^#' .env | xargs)
./gradlew :bootstrap:run
```

سترى رسالة في السجل تفيد بأن البوت جاهز وأنه مسجّل أوامره.

## الهيكلية

المشروع مقسم إلى عدة وحدات لضمان الفصل بين الطبقات:

| الوحدة            | الوصف |
|-------------------|-------|
| **app-core**      | يحتوي على النماذج (Models) والخدمات (Services) التي لا تعتمد على JDA. |
| **infra**         | يتضمن طبقة البنية التحتية مثل قواعد البيانات، الكاش والجدولة. |
| **discord-adapter** | يضم تكامل JDA، المستمعين للأحداث، وأوامر Slash. |
| **bootstrap**     | نقطة الدخول للتطبيق التي تقوم بتهيئة الوحدات أعلاه. |

## الإسهام

مرحباً بالمساهمات! إذا وجدت خطأ أو أردت إضافة ميزة، يرجى فتح Issue أو Pull Request. تأكد من قراءة إرشادات الكود وإضافة اختبارات عند الحاجة. سنعمل على دمج التغييرات بشكل دوري.
