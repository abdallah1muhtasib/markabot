# إعدادات Marka Bot

تم تصميم Marka Bot بحيث يدعم إعدادات لكل خادم (Per‑Guild Config). يتم تخزين الإعدادات في قاعدة بيانات PostgreSQL ويمكن تعديلها عبر أوامر Slash مخصصة. هذا الملف يوضح كيفية التعامل مع الإعدادات والمتغيرات البيئية المطلوبة.

## المتغيرات البيئية

لوظيفة تشغيل البوت يحتاج إلى مجموعة من المتغيرات البيئية. ينصح باستخدام ملف `.env` محلياً وتصديره في وقت التشغيل.

| المتغير              | الوصف |
|----------------------|-------|
| `BOT_TOKEN`          | توكن البوت من بوابة ديسكورد للمطورين. لا يجب مشاركته علناً. |
| `BOT_VERSION`        | رقم الإصدار المعروض في أمر `/about`. |
| `DB_URL`             | سلسلة الاتصال بقاعدة البيانات (مثل: `jdbc:postgresql://localhost:5432/markabot`). |
| `DB_USERNAME`        | اسم المستخدم لقاعدة البيانات. |
| `DB_PASSWORD`        | كلمة المرور لقاعدة البيانات. |

## أوامر الإعداد

سيتم توفير مجموعة أوامر Slash لإدارة إعدادات كل خادم. أمثلة للأوامر المقترحة:

- `/config set welcome_channel <channel>` – تعيين قناة الترحيب.
- `/config set log_channel <channel>` – تعيين قناة السجلات الافتراضية.
- `/config set dj_role <role>` – تحديد دور الـDJ المسؤول عن الموسيقى.
- `/config export` – تصدير إعدادات الخادم إلى ملف JSON.
- `/config import` – استيراد إعدادات من ملف JSON. يجب أن يكون المستخدم لديه صلاحيات الإدارة.

يخزن كل إعداد بالارتباط مع معرف الخادم (guild_id) في جدول `guild_settings` بعمود لكل خيار. الجدول الأولي سيتم إنشاؤه بواسطة مهاجرات SQL التي ستتوفر لاحقاً.

## صلاحيات الدعوة

يُحدد مجال صلاحيات البوت عند دعوته إلى الخادم. المثال التالي يستخدم الصلاحية `8` (صلاحيات المدير) لكن ينصح بتقليلها حسب الحاجة الأمنية:

```
https://discord.com/api/oauth2/authorize?client_id=<CLIENT_ID>&permissions=8&scope=bot%20applications.commands
```

استبدل `<CLIENT_ID>` بمعرف تطبيق البوت. يمكن تعديل قيمة `permissions` بناءً على الميزات التي تم تمكينها. للمزيد من التفاصيل راجع [وثائق ديسكورد](https://discord.com/developers/docs/topics/oauth2#bot-permissions).

## ملاحظة حول البيانات

لا يتم حفظ أي بيانات شخصية خارج إطار ديسكورد. جميع السجلات مخزنة لأغراض الإدارة فقط ويمكن للمسؤولين حذفها عند الطلب.
